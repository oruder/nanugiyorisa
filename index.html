<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ëˆ„ê¸° ìš”ë¦¬ì‚¬ - Division Chef</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ì‚¬ìš©ì ì´ë¦„ ì…ë ¥ ëª¨ë‹¬ -->
    <div class="username-modal" id="usernameModal">
        <div class="username-modal-content">
            <h2>ğŸ® ë‚˜ëˆ„ê¸° ìš”ë¦¬ì‚¬</h2>
            <p>ê²Œì„ì„ ì‹œì‘í•˜ë ¤ë©´ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</p>
            <input type="text" id="usernameInput" placeholder="ì´ë¦„ ì…ë ¥" maxlength="20">
            <button class="btn-start" id="startGameBtn">ì‹œì‘í•˜ê¸°</button>
        </div>
    </div>
    
    <div class="game-container">
        <!-- ë§¤ì¶œ í‘œì‹œ -->
        <div class="money-display" id="moneyDisplay">ğŸ’° 0ì›</div>
        <button class="reset-button" id="resetButton">ğŸ”„ ì´ˆê¸°í™”</button>
        
        <!-- ì£¼ë¬¸ì„œ ì˜ì—­ -->
        <div class="order-section">
            <div class="order-board">
                <h2>ì£¼ë¬¸ì„œ</h2>
                <div class="order-content" id="orderContent">
                    <div class="order-item">
                        <span class="ingredient-icon">ğŸŸ</span>
                        <span class="ingredient-name">ìƒì„ </span>
                        <div class="fraction-display">
                            <span class="numerator">2</span>
                            <span class="fraction-line"></span>
                            <span class="denominator">4</span>
                        </div>
                        <span class="unit">ë§ˆë¦¬</span>
                    </div>
                </div>
                <div class="level-info">
                    <span id="levelDisplay">ë ˆë²¨ 1</span>
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ ê²Œì„ ì˜ì—­ -->
        <div class="game-area">
            <!-- ì¬ë£Œí†µ ì˜ì—­ -->
            <div class="ingredient-storage">
                <h3>ì¬ë£Œ ì°½ê³ </h3>
                <div class="storage-containers">
                    <div class="storage-item" data-ingredient="fish">
                        <div class="storage-icon">
                            <img src="assets/fish.jpg" alt="ìƒì„ " style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                        <div class="storage-label">ìƒì„ </div>
                    </div>
                    <div class="storage-item" data-ingredient="meat">
                        <div class="storage-icon">
                            <img src="assets/meat.jpg" alt="ê³ ê¸°" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                        <div class="storage-label">ê³ ê¸°</div>
                    </div>
                    <div class="storage-item" data-ingredient="vegetable">
                        <div class="storage-icon">
                            <img src="assets/vegetable.jpg" alt="ì±„ì†Œ" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                        <div class="storage-label">ì±„ì†Œ</div>
                    </div>
                    <div class="storage-item" data-ingredient="bread">
                        <div class="storage-icon">
                            <img src="assets/bread.jpg" alt="ë¹µ" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                        <div class="storage-label">ë¹µ</div>
                    </div>
                    <div class="storage-item" data-ingredient="fruit">
                        <div class="storage-icon">
                            <img src="assets/fruit.jpg" alt="ê³¼ì¼" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                        <div class="storage-label">ê³¼ì¼</div>
                    </div>
                    <div class="storage-item" data-ingredient="cheese">
                        <div class="storage-icon">
                            <img src="assets/cheese.jpg" alt="ì¹˜ì¦ˆ" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                        <div class="storage-label">ì¹˜ì¦ˆ</div>
                    </div>
                </div>
            </div>

            <!-- ì‘ì—…ëŒ€ ì˜ì—­ -->
            <div class="workspace">
                <h3>ì‘ì—…ëŒ€</h3>
                <div class="workspace-area" id="workspaceArea">
                    <div class="workspace-placeholder">
                        ì¬ë£Œë¥¼ ì—¬ê¸°ë¡œ ê°€ì ¸ì˜¤ì„¸ìš”
                    </div>
                </div>
                <div class="workspace-controls">
                    <button id="divideBtn" class="btn btn-divide" disabled>ë“±ë¶„í•˜ê¸°</button>
                    <button id="moveWholeToPLateBtn" class="btn btn-primary" disabled>ì ‘ì‹œë¡œ ê°€ì ¸ê°€ê¸°</button>
                    <button id="clearWorkspaceBtn" class="btn btn-secondary">ì‘ì—…ëŒ€ ë¹„ìš°ê¸°</button>
                </div>
            </div>

            <!-- ì ‘ì‹œ ì˜ì—­ -->
            <div class="plate-section">
                <h3>ì ‘ì‹œ</h3>
                <div class="plate-area" id="plateArea">
                    <div class="plate-base">
                        <div class="plate-content" id="plateContent"></div>
                    </div>
                </div>
                <div class="plate-info">
                    <div class="current-amount" id="currentAmount">
                        í˜„ì¬: 0
                    </div>
                </div>
                <div class="plate-controls">
                    <button id="cookBtn" class="btn btn-cook" disabled>ìš”ë¦¬í•˜ê¸°</button>
                    <button id="clearPlateBtn" class="btn btn-secondary">ì ‘ì‹œ ë¹„ìš°ê¸°</button>
                </div>
                
                <!-- ìš”ë¦¬ ê²°ê³¼ ì˜ì—­ -->
                <div class="dish-result" id="dishResult" style="display: none;">
                    <h4 style="text-align: center; color: #667eea; margin-bottom: 10px;">ì™„ì„±ëœ ìš”ë¦¬</h4>
                    <div class="dish-image-container" id="dishImageContainer">
                        <img id="dishImage" src="" alt="ìš”ë¦¬" style="width: 100%; max-width: 200px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                        <div id="dishName" style="text-align: center; font-size: 1.2em; font-weight: bold; color: #495057; margin-top: 10px;"></div>
                    </div>
                    <div class="dish-controls" style="display: flex; gap: 10px; justify-content: center; margin-top: 15px;">
                        <button id="serveBtn" class="btn btn-serve">ì„œë¹™í•˜ê¸°</button>
                        <button id="discardBtn" class="btn btn-secondary">ë²„ë¦¬ê¸°</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- íŒíŠ¸ ë²„íŠ¼ -->
        <div class="hint-section">
            <button id="hintBtn" class="btn btn-hint">ğŸ’¡ íŒíŠ¸</button>
        </div>
    </div>

    <!-- ë“±ë¶„ ì…ë ¥ ëª¨ë‹¬ -->
    <div id="divideModal" class="modal">
        <div class="modal-content">
            <h3>ëª‡ ë“±ë¶„ìœ¼ë¡œ ë‚˜ëˆŒê¹Œìš”?</h3>
            <div class="divide-options">
                <button class="divide-option" data-parts="2">2ë“±ë¶„</button>
                <button class="divide-option" data-parts="3">3ë“±ë¶„</button>
                <button class="divide-option" data-parts="4">4ë“±ë¶„</button>
                <button class="divide-option" data-parts="6">6ë“±ë¶„</button>
                <button class="divide-option" data-parts="8">8ë“±ë¶„</button>
                <button class="divide-option" data-parts="12">12ë“±ë¶„</button>
            </div>
            <button class="btn btn-secondary" id="cancelDivide">ì·¨ì†Œ</button>
        </div>
    </div>

    <!-- ê²°ê³¼ ëª¨ë‹¬ -->
    <div id="resultModal" class="modal">
        <div class="modal-content result-modal">
            <div id="resultContent"></div>
            <div class="result-buttons">
                <button id="nextBtn" class="btn btn-primary">ë‹¤ìŒ ë¬¸ì œ</button>
                <button id="retryBtn" class="btn btn-secondary">ë‹¤ì‹œ ì‹œë„</button>
            </div>
        </div>
    </div>

    <!-- íŒíŠ¸ ëª¨ë‹¬ -->
    <div id="hintModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ’¡ íŒíŠ¸</h3>
            <div id="hintContent"></div>
            <button class="btn btn-primary" id="closeHint">í™•ì¸</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, getDoc, setDoc, updateDoc, increment, collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyDjHaq4tZvTC9IFxSK_M_yZg4WguyUh_NI",
            authDomain: "nanugiyorisa.firebaseapp.com",
            projectId: "nanugiyorisa",
            storageBucket: "nanugiyorisa.firebasestorage.app",
            messagingSenderId: "297540232572",
            appId: "1:297540232572:web:7eb1d80fec640e34b5b0f9"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // ì „ì—­ìœ¼ë¡œ ë…¸ì¶œ
        window.firebaseDB = db;
        window.firestoreFunctions = { doc, getDoc, setDoc, updateDoc, increment, collection, getDocs };
    </script>
    <script src="script.js"></script>
</body>
</html>
